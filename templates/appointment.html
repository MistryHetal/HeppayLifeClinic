{% extends 'base.html' %}
{% block content %}
{% load static %}

{{ form.as_p }}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Family Doctor: Get Appointment</title>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" href="css/styles.css" />

</head>

<div>
<style>
    .card {
        padding: 30px 40px;
        margin-top: 60px;
        margin-bottom: 60px;
        border: none !important;
        box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.2)
    }

    .blue-text {
        color: #00BCD4
    }

    .form-control-label {
        margin-bottom: 0
    }

    input,
    textarea,
    button {
        padding: 8px 15px;
        border-radius: 5px !important;
        margin: 5px 0px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        font-size: 18px !important;
        font-weight: 300
    }

    input:focus,
    textarea:focus {
        -moz-box-shadow: none !important;
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        border: 1px solid #00BCD4;
        outline-width: 0;
        font-weight: 400
    }

    .btn-block {
        text-transform: uppercase;
        font-size: 15px !important;
        font-weight: 400;
        height: 43px;
        cursor: pointer
    }

    .btn-block:hover {
        color: #fff !important
    }

    button:focus {
        -moz-box-shadow: none !important;
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        outline-width: 0
    }
</style>

<div class="content-section">
    <form method="POST">
        {% csrf_token %}

        <body>

            <!-- <div class="card notification-card notification-invitation">
            <div class="card-body">
                <div class="card-title">Jane invited you to join </div>
                </div>
            </div> -->

            <div class="container-fluid px-1 py-5 mx-auto">
                <div class="row d-flex justify-content-center">
                    <div class="col-xl-7 col-lg-8 col-md-9 col-11 text-center">
                        <h3>
                            Book an appointment
                        </h3>
                        <p class="blue-text">Use the following form to contact us and request an appointment..</p>
                        <div class="card">

                            <form class="form-card" method="POST">
                                <div class="row justify-content-between text-left">
                                    <div class="form-group col-md-6 flex-column d-flex">
                                        <label class="form-control-label px-3">First name<span class="text-danger">
                                                *</span>
                                        </label>
                                        <input required type="text" id="fname" name="fname"
                                            placeholder="Enter your first name" onblur="validate(1)">
                                    </div>

                                    <div class="form-group col-md-6 flex-column d-flex">
                                        <label class="form-control-label px-3">Last name<span class="text-danger">
                                                *</span></label>
                                        <input required type="text" id="lname" name="lname"
                                            placeholder="Enter your last name" onblur="validate(2)">
                                    </div>

                                </div>

                                <div class="row justify-content-between text-left">

                                    <div class="form-group col-md-6 flex-column d-flex">
                                        <label class="form-control-label px-3">Email<span class="text-danger"> *</span>
                                        </label>
                                        <input type="text" id="email" name="email" placeholder="" onblur="validate(3)">
                                    </div>

                                    <div class="form-group col-md-6 flex-column d-flex">
                                        <label class="form-control-label px-3">Phone number<span class="text-danger">
                                                *</span></label>
                                        <input type="text" id="mobile" name="mobile" placeholder=""
                                            onblur="validate(4)">
                                    </div>
                                    
                                </div>

                                <div class="row justify-content-between text-left">

                                    <div class="form-group col-md-12 flex-column d-flex">
                                        <p>Please select your appointment type</p>
                                        <input type="radio" id="online" name="appo_type" value="Online" onblur="validate(5)">
                                        <label class="form-control-label px-3" >Online</label>
                                        <input type="radio" id="offline" name="appo_type" value="Offline" onblur="validate(6)">
                                        <label class="form-control-label px-3">Offline</label>
                                    </div><br/> 

                                    {% comment %} <div class="form-group col-sm-6 flex-column d-flex">
                                        <p>appointment type</p>
                                        <input type="radio" id="offline" name="appo_type" value="Offline" onblur="validate(6)">
                                        <label for="offline">Offline</label>
                                    </div> {% endcomment %}
                                    
                                </div>

                                <div class="row justify-content-between text-left">
                                    <div class="form-group col-sm-6 flex-column d-flex">
                                         {% comment %} <label class="form-control-label px-3">Date<span class="text-danger"> *</span>
                                        </label>
                                        <input type="date" id="appointment_date" name="date" onchange="changeAppointmentDate()" placeholder="DD/MM/YYYY" onblur="validate(5)" pattern="(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))">  {% endcomment %}
                                        <label class="form-control-label px-3">Time<span class="text-danger"> *</span>
                                        </label>
                                        <select name="appointment_time" class="form-control"  onblur="validate(5)">
                                            <option value="Chooose your time">Chooose Your Time</option>
                                            <option value="10 AM to 10.30 AM" onblur="validate(6)">10 AM to 10.30 AM</option>
                                            <option value="10.30 AM to 11 AM" onblur="validate(7)">10.30 AM to 11 AM</option>
                                            <option value="11 AM to 11.30 AM" onblur="validate(8)">11 AM to 11.30 AM</option>
                                            <option value="11.30 AM to 12 PM" onblur="validate(9)">11.30 AM to 12 PM</option>
                                            <option value="06 PM to 06.30 PM" onblur="validate(10)">06 PM to 06.30 PM</option>
                                            <option value="06.30 PM to 07 PM" onblur="validate(11)">06.30 PM to 07 PM</option>
                                            <option value="07 PM to 07.30 PM" onblur="validate(12)">07 PM to 07.30 PM</option>
                                            <option value="07.30 PM to 08 PM" onblur="validate(13)">07.30 PM to 08 PM</option>
                                        </select>
                                    </div>

                                    <div class="form-group col-sm-6 flex-column d-flex">
                                        <label class="form-control-label px-3">Date<span class="text-danger"> *</span>
                                        </label>
                                        <input type="date" id="appointment_date" name="date" onchange="changeAppointmentDate()" placeholder="DD/MM/YYYY" onblur="validate(7)" pattern="(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))">
                                    </div>

                                </div>

                                <div class="row justify-content-between text-left">
                                    <div class="form-group col-12 flex-column d-flex">
                                        <label class="form-control-label px-3">Your request<span class="text-danger">
                                                *</span></label>
                                        <textarea type="text" id="request" name="request" placeholder=""
                                            onblur="validate(8)"></textarea>
                                    </div>
                                </div>
                                <div class="row justify-content-center">
                                    <div class="form-group col-sm-6"> <button type="submit"
                                            class="btn-block btn-primary">Send</button>
                                    </div>
                                </div><br/>
                                <div class="text-center mb-2">
                                    Show Appointment History
                                    <a href="{% url 'history' %}" class="register-link">show here
                                    </a><br /><br /><br />
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!--  JQuery  -->
            <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
            <!--  Bootstrap tooltips  -->
            <script type="text/javascript" src="js/popper.min.js"></script>
            <!--  Bootstrap core JavaScript  -->
            <script type="text/javascript" src="js/bootstrap.min.js"></script>

            <script>
                function validate(val) {
                    v1 = document.getElementById("fname");
                    v2 = document.getElementById("lname");
                    v3 = document.getElementById("email");
                    v4 = document.getElementById("mobile");
                    v5 = document.getElementById("appointment_time");
                    v6 = document.getElementById("date");
                    v7 = document.getElementById("request");

                    flag1 = true;
                    flag2 = true;
                    flag3 = true;
                    flag4 = true;
                    flag5 = true;
                    flag6 = true;
                    flag7 = true;

                    if (val >= 1 || val == 0) {
                        if (v1.value == "") {
                            v1.style.borderColor = "red";
                            flag1 = false;
                        }
                        else {
                            v1.style.borderColor = "green";
                            flag1 = true;
                        }
                    }

                    if (val >= 2 || val == 0) {
                        if (v2.value == "") {
                            v2.style.borderColor = "red";
                            flag2 = false;
                        }
                        else {
                            v2.style.borderColor = "green";
                            flag2 = true;
                        }
                    }
                    if (val >= 3 || val == 0) {
                        if (v3.value == "") {
                            v3.style.borderColor = "red";
                            flag3 = false;
                        }
                        else {
                            v3.style.borderColor = "green";
                            flag3 = true;
                        }
                    }
                    if (val >= 4 || val == 0) {
                        if (v4.value == "") {
                            v4.style.borderColor = "red";
                            flag4 = false;
                        }
                        else {
                            v4.style.borderColor = "green";
                            flag4 = true;
                        }
                    }
                    if (val >= 5 || val == 0) {
                        if (v5.value == "") {
                            v5.style.borderColor = "red";
                            flag5 = false;
                        }
                        else {
                            v5.style.borderColor = "green";
                            flag5 = true;
                        }
                    }
                    if (val >= 6 || val == 0) {
                        if (v6.value == "") {
                            v6.style.borderColor = "red";
                            flag6 = false;
                        }
                        else {
                            v6.style.borderColor = "green";
                            flag6 = true;
                        }
                    }
                    if (val >= 7 || val == 0) {
                        if (v7.value == "") {
                            v7.style.borderColor = "red";
                            flag7 = false;
                        }
                        else {
                            v7.style.borderColor = "green";
                            flag7 = true;
                        }
                    }
                    

                    flag = flag1 && flag2 && flag3 && flag4 && flag5 && flag6 && flag7 && ;

                    return flag;
                }
            </script>

        </body>

    </form>
</div>
{% if error == "no" %}
     <script>
	   alert('Appointment has been booked.');
       window.location=('{% url 'appointmrnt' %}');
     </script>
{% endif %}

{% if error == "yes" %}
     <script>
	    alert('Something went wrong, Try Again');
     </script>
{% endif %}

    
</div>

</html>
<script type="text/javascript">
    var today = new Date().toISOString().split('T')[0];
    var date = new Date();
    date.setDate(date.getDate()+2);
    document.getElementById("appointment_date").setAttribute('min', today);
    document.getElementById("appointment_date").setAttribute('max', date.toISOString().split('T')[0]);
    function changeAppointmentDate() {
    }
</script>

{% endblock content %}
